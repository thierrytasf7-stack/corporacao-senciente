# [STORY-20260212233920-3] Timeline Visual do Pipeline de Stories
> **Status:** REVISADO
> **subStatus:** waiting_human_approval
> **Agente Sugerido:** @aider
> **Agente AIOS:** ðŸŽ¨ @ux-design-expert (Uma) - UX/UI Designer
> **Skill:** `/AIOS:agents:ux-design-expert`
> **Tipo:** feature
> **Dificuldade:** HARD
> **Prioridade:** Alta
> **Criado em:** 2026-02-12 23:39:20

## Contexto
Entender onde stories ficam travadas no pipeline e fundamental para otimizar throughput. Uma timeline visual permite identificar gargalos rapidamente - por exemplo, se stories ficam em PARA_REVISAO por horas, indica que o worker de revisao precisa de atencao.

## Objetivo
Criar componente no dashboard que mostra timeline visual do ciclo de vida das stories: TODO -> EM_EXECUCAO -> PARA_REVISAO -> REVISADO. Exibir tempo em cada fase e gargalos do pipeline.

## Responsavel
**ðŸŽ¨ Uma** (UX/UI Designer) e o agente AIOS responsavel por esta task.
- **Foco:** Design systems, wireframes, componentes UI, acessibilidade
- **Invocacao:** `/AIOS:agents:ux-design-expert`
- **Executor runtime:** `@aider` (worker autonomo que processa a story)

## Arquivos Alvo
- `apps/dashboard/src/components/`
- `apps/dashboard/src/stores/`
- `apps/dashboard/src/hooks/`

## Output Esperado
- Componente apps/dashboard/src/components/pipeline-timeline.tsx renderizando barras horizontais
- API route apps/dashboard/src/app/api/stories/timeline/route.ts retornando timestamps por fase
- Cores CSS para cada fase: TODO=#94a3b8, EXEC=#3b82f6, REVISAO=#eab308, DONE=#22c55e
- Componente integrado na pagina de detalhes da story com dados reais

## Acceptance Criteria
- [?] Componente PipelineTimeline renderizando fases da story
- [?] Barra de tempo proporcional a duracao em cada fase
- [?] Cores distintas por fase (TODO=cinza, EXEC=azul, REVISAO=amarelo, DONE=verde)
- [?] Dados carregados do filesystem via API route

## Constraints
- Usar CSS Grid ou Flexbox puro para layout - nao instalar bibliotecas de timeline
- Componente deve ser responsivo (funcionar em telas >= 768px)
- Timestamps extraidos do frontmatter da story (campo Criado em e transicoes)
- NAO modificar arquivos fora do escopo listado em Arquivos Alvo
- NAO introduzir dependencias externas sem justificativa
- NAO quebrar funcionalidades existentes

## Instrucoes
1. Criar API route que parseia timestamps das stories em docs/stories/. 2. Criar componente PipelineTimeline com barras horizontais por fase. 3. Usar CSS Grid para layout responsivo. 4. Adicionar na pagina de detalhes de stories.

## Exemplo de Referencia
```
interface TimelinePhase {
  status: string;
  startedAt: string;
  endedAt: string | null;
  durationMs: number;
}

const PHASE_COLORS: Record<string, string> = {
  TODO: '#94a3b8',
  EM_EXECUCAO: '#3b82f6',
  PARA_REVISAO: '#eab308',
  REVISADO: '#22c55e',
};

export function PipelineTimeline({ phases }: { phases: TimelinePhase[] }) {
  const totalMs = phases.reduce((sum, p) => sum + p.durationMs, 0);
  return (
    <div className="flex w-full h-8 rounded overflow-hidden">
      {phases.map(p => (
        <div key={p.status} style={{ width: `${(p.durationMs/totalMs)*100}%`, background: PHASE_COLORS[p.status] }} />
      ))}
    </div>
  );
}
```


## Review Results
> Reviewed at: 2026-02-12T23:44:24.785050
> Verdict: FAIL
> Aider log present: False
> Aider result: None
> Files modified by Aider: 0
> All syntax OK: False
> apps\dashboard\src\components\agents\AgentCard.tsx: PASS - JSX/TSX OK (6035 bytes)
> apps\dashboard\src\components\agents\AgentMonitor.tsx: PASS - JSX/TSX OK (6133 bytes)
> apps\dashboard\src\components\agents\index.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\components\context\ContextPanel.tsx: PASS - JSX/TSX OK (8873 bytes)
> apps\dashboard\src\components\context\index.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\components\github\GitHubPanel.tsx: PASS - JSX/TSX OK (12109 bytes)
> apps\dashboard\src\components\github\index.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\components\insights\InsightsPanel.tsx: PASS - JSX/TSX OK (10151 bytes)
> apps\dashboard\src\components\insights\index.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\components\kanban\KanbanBoard.tsx: PASS - JSX/TSX OK (8431 bytes)
> apps\dashboard\src\components\kanban\KanbanColumn.tsx: PASS - JSX/TSX OK (6177 bytes)
> apps\dashboard\src\components\kanban\SortableStoryCard.tsx: PASS - JSX/TSX OK (1685 bytes)
> apps\dashboard\src\components\kanban\index.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\components\layout\AppShell.tsx: PASS - JSX/TSX OK (4517 bytes)
> apps\dashboard\src\components\layout\ProjectTabs.tsx: PASS - JSX/TSX OK (6185 bytes)
> apps\dashboard\src\components\layout\Sidebar.tsx: PASS - JSX/TSX OK (4954 bytes)
> apps\dashboard\src\components\layout\StatusBar.tsx: PASS - JSX/TSX OK (4221 bytes)
> apps\dashboard\src\components\layout\index.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\components\monitor\ActivityFeed.tsx: PASS - JSX/TSX OK (8401 bytes)
> apps\dashboard\src\components\monitor\CommandPanel.tsx: PASS - JSX/TSX OK (4465 bytes)
> apps\dashboard\src\components\monitor\CurrentToolIndicator.tsx: PASS - JSX/TSX OK (3386 bytes)
> apps\dashboard\src\components\monitor\MonitorPanel.tsx: PASS - JSX/TSX OK (3474 bytes)
> apps\dashboard\src\components\monitor\MonitorStatus.tsx: PASS - JSX/TSX OK (2687 bytes)
> apps\dashboard\src\components\monitor\index.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\components\qa\QAMetricsPanel.tsx: PASS - JSX/TSX OK (20504 bytes)
> apps\dashboard\src\components\roadmap\RoadmapCard.tsx: PASS - JSX/TSX OK (2103 bytes)
> apps\dashboard\src\components\roadmap\RoadmapView.tsx: PASS - JSX/TSX OK (9327 bytes)
> apps\dashboard\src\components\roadmap\index.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\components\settings\SettingsPanel.tsx: PASS - JSX/TSX OK (10700 bytes)
> apps\dashboard\src\components\settings\index.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\components\stories\StoryCard.tsx: PASS - JSX/TSX OK (4076 bytes)
> apps\dashboard\src\components\stories\StoryCreateModal.tsx: PASS - JSX/TSX OK (14066 bytes)
> apps\dashboard\src\components\stories\StoryDetailModal.tsx: PASS - JSX/TSX OK (8840 bytes)
> apps\dashboard\src\components\stories\StoryEditModal.tsx: PASS - JSX/TSX OK (18265 bytes)
> apps\dashboard\src\components\stories\index.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\components\terminal\TerminalOutput.tsx: PASS - JSX/TSX OK (6234 bytes)
> apps\dashboard\src\components\terminal\index.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\components\terminals\TerminalCard.tsx: PASS - JSX/TSX OK (6161 bytes)
> apps\dashboard\src\components\terminals\TerminalGrid.tsx: PASS - JSX/TSX OK (6288 bytes)
> apps\dashboard\src\components\terminals\TerminalOutput.tsx: PASS - JSX/TSX OK (7554 bytes)
> apps\dashboard\src\components\terminals\TerminalStream.tsx: PASS - JSX/TSX OK (9453 bytes)
> apps\dashboard\src\components\terminals\index.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\components\ui\badge.tsx: PASS - JSX/TSX OK (1783 bytes)
> apps\dashboard\src\components\ui\button.tsx: PASS - JSX/TSX OK (2399 bytes)
> apps\dashboard\src\components\ui\context-menu.tsx: PASS - JSX/TSX OK (8274 bytes)
> apps\dashboard\src\components\ui\dialog.tsx: PASS - JSX/TSX OK (4308 bytes)
> apps\dashboard\src\components\ui\fab.tsx: PASS - JSX/TSX OK (3728 bytes)
> apps\dashboard\src\components\ui\icon.tsx: PASS - JSX/TSX OK (949 bytes)
> apps\dashboard\src\components\ui\progress-bar.tsx: PASS - JSX/TSX OK (1250 bytes)
> apps\dashboard\src\components\ui\section-label.tsx: PASS - JSX/TSX OK (1344 bytes)
> apps\dashboard\src\components\ui\skeleton.tsx: PASS - JSX/TSX OK (1847 bytes)
> apps\dashboard\src\components\ui\status-badge.tsx: PASS - JSX/TSX OK (4466 bytes)
> apps\dashboard\src\components\ui\status-dot.tsx: PASS - JSX/TSX OK (1427 bytes)
> apps\dashboard\src\components\ui\tag.tsx: PASS - JSX/TSX OK (4603 bytes)
> apps\dashboard\src\components\workers\WorkerCard.tsx: PASS - JSX/TSX OK (7384 bytes)
> apps\dashboard\src\components\workers\WorkerPanel.tsx: PASS - JSX/TSX OK (4160 bytes)
> apps\dashboard\src\components\workers\index.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\stores\agent-store.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\stores\alert-store.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\stores\index.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\stores\monitor-store.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\stores\projects-store.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\stores\settings-store.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\stores\story-store.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\stores\terminal-store.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\stores\ui-store.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\stores\worker-store.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\hooks\index.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\hooks\use-agents.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\hooks\use-aios-status.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\hooks\use-monitor-events.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\hooks\use-realtime-status.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\hooks\use-stories.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\hooks\use-workers.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\hooks\useQueryCache.ts: FAIL - C:\Users\User\Desktop\Diana-Corporacao-Senciente\apps\dashboard\src\hooks\useQueryCache.ts:4
interface CacheEntry<T> {
          ^^^^^^^^^^

SyntaxError: Unexpected identifier 'CacheEntry'
    at wrapSafe (node:internal/modules/cjs/loader:1734:18)
    at checkSyntax (node:internal/main/check_syntax:76:3)

Node.js v25.4.0

## Aider Processing Log
- **Timestamp:** 2026-02-12 23:45:42
- **Duration:** 120.6s
- **Result:** FAILED
- **Error:** Exit code 1


## Review Results
> Reviewed at: 2026-02-12T23:45:45.305967
> Verdict: FAIL
> Aider log present: True
> Aider result: FAILED
> Files modified by Aider: 0
> All syntax OK: False
> Aider reported FAILED
