# [STORY-20260213005834-3] Implementar Virtual Scrolling na Lista de Stories
> **Status:** REVISADO
> **subStatus:** waiting_human_approval
> **Agente Sugerido:** @aider
> **Agente AIOS:** ðŸ’» @dev (Dex) - Full Stack Developer
> **Skill:** `/AIOS:agents:dev`
> **Tipo:** optimization
> **Dificuldade:** MEDIUM
> **Prioridade:** Alta
> **Criado em:** 2026-02-13 00:58:34

## Contexto
O backlog de stories cresce continuamente com o pipeline autonomo. Sem virtualizacao, o dashboard se torna inutilizavel apos algumas centenas de stories, comprometendo a observabilidade que e pilar do sistema.

## Objetivo
A lista de stories no dashboard renderiza todos os itens de uma vez, causando lentidao com mais de 100 stories. Implementar virtual scrolling para renderizar apenas itens visiveis na viewport.

## Responsavel
**ðŸ’» Dex** (Full Stack Developer) e o agente AIOS responsavel por esta task.
- **Foco:** Implementacao de codigo, debugging, testes unitarios e de integracao
- **Invocacao:** `/AIOS:agents:dev`
- **Executor runtime:** `@aider` (worker autonomo que processa a story)

## Arquivos Alvo
- `apps/dashboard/src/components/`
- `apps/dashboard/src/hooks/`

## Output Esperado
- Hook apps/dashboard/src/hooks/use-virtual-list.ts implementando logica de virtualizacao
- Componente de lista de stories renderizando apenas itens na viewport + buffer
- Performance de scroll suave com 500+ stories (60fps verificavel via DevTools)
- Filtros e busca funcionando corretamente com lista virtualizada

## Acceptance Criteria
- [?] Lista de stories usando virtual scrolling
- [?] Apenas itens visiveis renderizados no DOM
- [?] Scroll suave sem jank mesmo com 500+ stories
- [?] Funcionalidade de busca e filtro compativel com virtualizacao

## Constraints
- Implementar virtualizacao custom com hook - nao instalar react-window ou react-virtualized
- Itens devem ter altura fixa (ex: 72px) para calculo preciso de offset
- Manter acessibilidade: itens fora da viewport devem ser aria-hidden
- NAO modificar arquivos fora do escopo listado em Arquivos Alvo
- NAO introduzir dependencias externas sem justificativa
- NAO quebrar funcionalidades existentes

## Instrucoes
1. Implementar hook useVirtualList ou usar react-window. 2. Substituir renderizacao direta da lista por componente virtualizado. 3. Garantir que altura dos itens e calculada corretamente. 4. Testar com dataset grande (500+ stories) para validar performance.

## Exemplo de Referencia
```
import { useState, useRef, useEffect, useMemo } from 'react';

export function useVirtualList<T>(items: T[], itemHeight: number, containerHeight: number) {
  const [scrollTop, setScrollTop] = useState(0);
  const startIndex = Math.floor(scrollTop / itemHeight);
  const endIndex = Math.min(startIndex + Math.ceil(containerHeight / itemHeight) + 1, items.length);
  const visibleItems = useMemo(
    () => items.slice(startIndex, endIndex).map((item, i) => ({ item, index: startIndex + i })),
    [items, startIndex, endIndex]
  );
  const totalHeight = items.length * itemHeight;
  const offsetY = startIndex * itemHeight;
  return { visibleItems, totalHeight, offsetY, onScroll: (e: React.UIEvent) => setScrollTop(e.currentTarget.scrollTop) };
}
```

## Aider Processing Log
- **Timestamp:** 2026-02-13 01:04:45
- **Duration:** 109.4s
- **Result:** SUCCESS
- **Files Modified:** apps/dashboard/src/hooks/index.ts, apps/dashboard/src/hooks/use-agents.ts, apps/dashboard/src/hooks/use-aios-status.ts, apps/dashboard/src/hooks/use-monitor-events.ts, apps/dashboard/src/hooks/use-realtime-status.ts


## Review Results
> Reviewed at: 2026-02-13T01:04:49.557590
> Verdict: PASS
> Aider log present: True
> Aider result: SUCCESS
> Files modified by Aider: 5
> All syntax OK: True
> apps\dashboard\src\hooks\index.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\hooks\use-agents.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\hooks\use-aios-status.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\hooks\use-monitor-events.ts: PASS - JS/TS syntax OK
> apps\dashboard\src\hooks\use-realtime-status.ts: PASS - JS/TS syntax OK
