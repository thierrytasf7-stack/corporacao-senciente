name: dev-aider
version: 1.0.0
short-title: "Dev-Aider Squad - Open Source AI with Free Models"
description: >-
  Ultra-low-cost development squad using AIDER-AIOS as a tool with free models via OpenRouter.
  Uses Arcee AI: Trinity Large Preview (127B) completely free. Perfect for reducing AI costs
  while maintaining quality code generation. Integrates AIDER-AIOS as subprocess workflow.

author: Synkra AIOS Dev Team
slashPrefix: aider

tags:
  - cost-reduction
  - open-source
  - arcee-trinity
  - openrouter-free
  - aider-integration
  - subprocess-workflow
  - dev-efficiency

requires:
  node: ">=18.0.0"
  aios: ">=2.3.0"
  python: ">=3.8.0"
  aider: "installed-locally"

status:
  production_ready: true
  cost_model: "free (Arcee Trinity 127B via OpenRouter)"
  integration: "AIDER-AIOS as external tool (subprocess)"

# SQUAD PURPOSE
purpose: |
  Cost-optimized development using AIDER-AIOS with free Arcee Trinity model.

  Use Case 1 - CHEAP IMPLEMENTATION:
    Story needs implementation → @aider-dev analyzes scope
    → If complexity < STANDARD: Invoke AIDER-AIOS (free, Arcee Trinity)
    → If complexity >= COMPLEX: Escalate to @dev (Claude Opus)

  Use Case 2 - REFACTORING & CLEANUP:
    @aider-dev uses AIDER for refactoring, optimization, documentation
    → Save Claude tokens for complex logic

  Use Case 3 - COST ANALYSIS:
    @aider-optimizer decides when to use Aider vs Claude
    → Calculate cost-benefit ratio
    → Track savings vs quality metrics

# SQUAD ARCHITECTURE
architecture:
  type: subprocess-integration
  pattern: claude-orchestrator → aider-aios-tool → free-model-inference

  layers:
    orchestration: "Claude AIOS (claude-code agent)"
    tool_integration: "AIDER-AIOS subprocess wrapper"
    execution: "Aider CLI (local terminal)"
    inference: "Arcee Trinity 127B (free via OpenRouter)"

# EXTERNAL TOOL CONFIGURATION
external_tools:
  aider_aios:
    path: "../../AIDER-AIOS"  # Reference to AIDER-AIOS repo
    invocation: "subprocess (Python wrapper)"
    models:
      primary: "arcee-ai/trinity-large-preview:free (127B, free)"
      fallback: "qwen/qwen2.5-7b-instruct:free (free)"
    api_provider: "OpenRouter"
    cost: "100% FREE"

# AGENT DEFINITIONS
agents:
  - id: aider-dev
    role: developer
    description: "Implements tasks via AIDER-AIOS with free models"

  - id: aider-optimizer
    role: optimizer
    description: "Decides cost-benefit of using Aider vs Claude, optimizes prompts"

# COMMANDS & WORKFLOWS
commands:
  primary:
    - /aider-dev        # Invoke aider-dev agent
    - /aider-optimize   # Invoke aider-optimizer agent

  shortcuts:
    - /cheap            # Quick invoke AIDER with defaults
    - /analyze-cost     # Cost analysis for current task

# DEPENDENCIES
dependencies:
  scripts:
    - scripts/aider-invoke.js        # Wrapper to invoke AIDER-AIOS
    - scripts/cost-calculator.js     # Calculate cost savings
    - scripts/model-selector.js      # Choose between Aider/Claude

  tasks:
    - invoke-aider.md               # Task to invoke AIDER-AIOS
    - cost-analysis.md              # Cost-benefit analysis
    - aider-handoff.md              # Handoff from Claude to Aider
    - aider-integration.md          # Integration workflows

  templates:
    - aider-prompt-tmpl.md          # Optimized prompt templates
    - cost-report-tmpl.md           # Cost analysis report

  data:
    - arcee-trinity-guide.md        # Model capabilities & limits
    - cost-strategies.md            # When to use Aider vs Claude
    - free-models-comparison.md     # Other free options

# INTEGRATION WITH AIOS CORE
integration:
  aios_core_enabled: true
  aios_core:
    agents_used: ["@dev", "@architect", "@qa"]
    when_to_use: "When task can be done cheaper via Aider without quality loss"
    integration_type: "subprocess wrapper"
    parent_framework: "Synkra AIOS (claude-code)"

  workflow_position: "Optional layer before @dev implementation"

  decision_tree:
    - "Complexity SIMPLE + AIDER applicable? → YES: Use Aider (FREE)"
    - "Complexity STANDARD + AIDER suitable? → MAYBE: Analyze cost-benefit"
    - "Complexity COMPLEX? → NO: Use @dev (better quality, worth cost)"
    - "Task is refactoring/docs? → YES: Use Aider (save tokens)"

# CAPABILITIES
capabilities:
  aider_cli:
    - Full terminal-based development
    - Multi-file editing (/add, /drop files)
    - Git integration (diff, commit)
    - Model switching
    - Incremental development

  free_models:
    - Arcee Trinity 127B (4k context, excellent code)
    - Qwen 2.5 7B (8k context, good quality)
    - DeepSeek R1 Distill (4k context)
    - All completely FREE via OpenRouter

  cost_optimization:
    - Automatic cost tracking
    - Savings calculation vs Claude Opus
    - Quality metrics vs cost analysis
    - Model recommendation engine

# COST COMPARISON
costs:
  aider_arcee_trinity:
    per_thousand_tokens: "$0"
    monthly_budget: "$0 (completely free)"
    suitable_for: "Simple to standard complexity"

  claude_opus:
    per_thousand_tokens: "$15 (input), $60 (output)"
    monthly_example: "$200-500 (active development)"
    suitable_for: "Complex, high-quality tasks"

  savings_potential: "100% on simple tasks, 50%+ on standard tasks"

# QUALITY EXPECTATIONS
quality:
  arcee_trinity:
    code_quality: "Good (suitable for most tasks)"
    reasoning: "Limited (no complex logic)"
    context_window: "4k tokens (manageable with good prompts)"
    cost: "FREE"

  claude_opus:
    code_quality: "Excellent"
    reasoning: "Excellent"
    context_window: "200k tokens"
    cost: "Expensive"

  recommendation: "Use Aider for implementation, Claude for architecture/complex logic"

# SETUP REQUIREMENTS
setup:
  required:
    - AIDER-AIOS cloned locally (reference path above)
    - OpenRouter account (free tier available)
    - OPENROUTER_API_KEY environment variable set
    - Python 3.8+
    - Node.js 18+

  optional:
    - Git repository (for /commit command in Aider)
    - Terminal/shell (for subprocess execution)

# METADATA
metadata:
  created: "2026-02-04"
  last_updated: "2026-02-04"
  maintainer: "Synkra AIOS Dev Team"
  squad_type: "cost-optimization / tool-integration"
  integration_type: "subprocess wrapper"
  production_status: "ready"
