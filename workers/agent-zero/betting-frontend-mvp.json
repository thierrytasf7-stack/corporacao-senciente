{
  "agent": "dev",
  "task_type": "implement",
  "aios_guide_path": ".aios-core/development/agents/dev.md",
  "context_files": [
    "workers/agent-zero/results/betting-fullstack-plan.md",
    "modules/betting-platform/backend/src/index.ts",
    "modules/betting-platform/backend/tsconfig.json",
    "modules/betting-platform/backend/package.json",
    "squads/ceo-bet/.env",
    "squads/ceo-bet/data/schema.sql"
  ],
  "acceptance_criteria": [
    "Dashboard interface implementado com React 19 + Vite + TypeScript",
    "Estrutura de diretórios seguindo padrão: src/{components,pages,lib,hooks,stores,types}",
    "shadcn/ui configurado com Tailwind CSS",
    "tRPC client configurado para comunicação com backend (porta 21360)",
    "Zustand stores para state management (strategies, backtests, positions)",
    "TanStack Query para data fetching e cache",
    "4 páginas principais: Dashboard, Strategy Config, Backtest Results, Reports",
    "Componentes reutilizáveis: StrategyCard, BacktestChart, PositionTable, RiskMetrics",
    "Recharts integrado para visualizações (equity curves, returns, drawdowns)",
    "Dark mode toggle funcionando",
    "Responsive design (mobile-first com breakpoints sm/md/lg/xl)",
    "Build otimizado com code splitting e lazy loading",
    "Porta 21361 configurada em vite.config.ts"
  ],
  "max_tool_iterations": 50,
  "model_preference": "trinity",
  "priority": "high",
  "prompt": "# Week 7-8: Frontend MVP Implementation\n\n## Context\nVocê está implementando a interface web para o sistema de apostas esportivas BET-SPORTS. O backend já está pronto (porta 21360) com Betfair, Pinnacle, Odds polling e Arbitrage detector.\n\n## Tech Stack (MUST USE)\n- React 19 + TypeScript\n- Vite (build tool)\n- Tailwind CSS 4.x\n- shadcn/ui (components)\n- Zustand (state management)\n- TanStack Query v5 (data fetching)\n- tRPC (API communication)\n- Recharts (charts)\n- date-fns (dates)\n- Zod (validation)\n\n## Architecture\n```\nmodules/betting-platform/frontend/\n├── src/\n│   ├── components/\n│   │   ├── ui/          # shadcn/ui components\n│   │   ├── dashboard/\n│   │   │   ├── StrategyCard.tsx\n│   │   │   ├── PositionTable.tsx\n│   │   │   └── RiskMetrics.tsx\n│   │   ├── strategy/\n│   │   │   ├── StrategyForm.tsx\n│   │   │   └── ParameterEditor.tsx\n│   │   ├── backtest/\n│   │   │   ├── BacktestChart.tsx\n│   │   │   ├── EquityCurve.tsx\n│   │   │   └── MetricsGrid.tsx\n│   │   └── layout/\n│   │       ├── AppLayout.tsx\n│   │       └── Sidebar.tsx\n│   ├── pages/\n│   │   ├── Dashboard.tsx\n│   │   ├── StrategyConfig.tsx\n│   │   ├── BacktestResults.tsx\n│   │   └── Reports.tsx\n│   ├── lib/\n│   │   ├── trpc.ts          # tRPC client setup\n│   │   ├── api.ts           # API utilities\n│   │   └── utils.ts         # Helper functions\n│   ├── hooks/\n│   │   ├── useStrategies.ts\n│   │   ├── useBacktests.ts\n│   │   └── usePositions.ts\n│   ├── stores/\n│   │   ├── strategyStore.ts\n│   │   ├── backtestStore.ts\n│   │   └── uiStore.ts\n│   ├── types/\n│   │   ├── strategy.ts\n│   │   ├── backtest.ts\n│   │   └── position.ts\n│   ├── App.tsx\n│   ├── main.tsx\n│   └── index.css\n├── public/\n├── index.html\n├── vite.config.ts\n├── tailwind.config.js\n├── tsconfig.json\n├── package.json\n└── .env\n```\n\n## Implementation Steps\n\n### 1. Project Setup\n```bash\ncd modules/betting-platform\nmkdir -p frontend/src/{components,pages,lib,hooks,stores,types}\nnpm create vite@latest frontend -- --template react-ts\ncd frontend\nnpm install\nnpm install -D tailwindcss postcss autoprefixer\nnpm install @tanstack/react-query @trpc/client @trpc/server\nnpm install zustand recharts date-fns zod\nnpm install -D @types/node\n```\n\n### 2. shadcn/ui Setup\n```bash\nnpx shadcn@latest init\n# Select: TypeScript, Tailwind CSS, src directory\nnpx shadcn@latest add button card input select table tabs badge\n```\n\n### 3. Core Configuration Files\n\n**vite.config.ts:**\n```typescript\nimport { defineConfig } from 'vite'\nimport react from '@vitejs/plugin-react'\nimport path from 'path'\n\nexport default defineConfig({\n  plugins: [react()],\n  server: {\n    port: 21361,\n    proxy: {\n      '/trpc': {\n        target: 'http://localhost:21360',\n        changeOrigin: true\n      }\n    }\n  },\n  resolve: {\n    alias: {\n      '@': path.resolve(__dirname, './src')\n    }\n  }\n})\n```\n\n**tailwind.config.js:** Use shadcn/ui default\n\n**.env:**\n```\nVITE_API_URL=http://localhost:21360\nVITE_TRPC_URL=http://localhost:21360/trpc\n```\n\n### 4. tRPC Client Setup\n\n**src/lib/trpc.ts:**\n```typescript\nimport { createTRPCReact } from '@trpc/react-query'\nimport type { AppRouter } from '../../../backend/src/router'\n\nexport const trpc = createTRPCReact<AppRouter>()\n```\n\n**src/main.tsx:**\n```typescript\nimport React from 'react'\nimport ReactDOM from 'react-dom/client'\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query'\nimport { httpBatchLink } from '@trpc/client'\nimport { trpc } from './lib/trpc'\nimport App from './App'\nimport './index.css'\n\nconst queryClient = new QueryClient()\nconst trpcClient = trpc.createClient({\n  links: [\n    httpBatchLink({\n      url: import.meta.env.VITE_TRPC_URL\n    })\n  ]\n})\n\nReactDOM.createRoot(document.getElementById('root')!).render(\n  <React.StrictMode>\n    <trpc.Provider client={trpcClient} queryClient={queryClient}>\n      <QueryClientProvider client={queryClient}>\n        <App />\n      </QueryClientProvider>\n    </trpc.Provider>\n  </React.StrictMode>\n)\n```\n\n### 5. Zustand Stores\n\n**src/stores/strategyStore.ts:**\n```typescript\nimport { create } from 'zustand'\n\ninterface Strategy {\n  id: string\n  name: string\n  type: string\n  params: Record<string, any>\n  active: boolean\n}\n\ninterface StrategyStore {\n  strategies: Strategy[]\n  selectedStrategy: string | null\n  setStrategies: (strategies: Strategy[]) => void\n  selectStrategy: (id: string) => void\n}\n\nexport const useStrategyStore = create<StrategyStore>((set) => ({\n  strategies: [],\n  selectedStrategy: null,\n  setStrategies: (strategies) => set({ strategies }),\n  selectStrategy: (id) => set({ selectedStrategy: id })\n}))\n```\n\n### 6. Key Components\n\n**Dashboard Page:** Overview with active strategies, open positions, PnL\n**Strategy Config Page:** Form to create/edit strategies, parameter tuning\n**Backtest Results Page:** Equity curve, metrics grid, trade list\n**Reports Page:** Daily/weekly/monthly PnL, risk metrics\n\n### 7. Charts with Recharts\n\n**Equity Curve:**\n```typescript\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend } from 'recharts'\n\nexport function EquityCurve({ data }: { data: any[] }) {\n  return (\n    <LineChart width={800} height={400} data={data}>\n      <CartesianGrid strokeDasharray=\"3 3\" />\n      <XAxis dataKey=\"date\" />\n      <YAxis />\n      <Tooltip />\n      <Legend />\n      <Line type=\"monotone\" dataKey=\"equity\" stroke=\"#8884d8\" />\n    </LineChart>\n  )\n}\n```\n\n## Quality Gates\n1. TypeScript strict mode sem erros\n2. ESLint sem warnings\n3. Build production sem erros (`npm run build`)\n4. Dev server roda em porta 21361\n5. Todas as 4 páginas renderizam corretamente\n6. tRPC client conecta com backend\n7. Dark mode funciona\n8. Responsive em mobile/tablet/desktop\n\n## Deliverables\n- [ ] Frontend completo em `modules/betting-platform/frontend/`\n- [ ] ~30 arquivos TypeScript (components, pages, stores, hooks)\n- [ ] package.json com todas as dependências\n- [ ] vite.config.ts configurado na porta 21361\n- [ ] tRPC client funcionando\n- [ ] 4 páginas principais implementadas\n- [ ] Componentes shadcn/ui configurados\n- [ ] Build otimizado funcionando\n- [ ] README.md com instruções de setup\n\n## Execution Mode\n**Fire-and-forget:** Implemente tudo de uma vez, seguindo exatamente a estrutura acima. Qualidade target: 9/10. Use Trinity model para custo $0.\n\n## Auto-Review Criteria\n- Code quality: TypeScript strict, sem any\n- Architecture: Separation of concerns, DRY principle\n- UX: Responsive, accessible (ARIA labels), loading states\n- Performance: Code splitting, lazy loading, memoization\n- Security: Input validation com Zod, CSRF protection\n"
}
