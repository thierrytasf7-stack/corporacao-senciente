{
  "id": "impl-phase1-task1-redis-env",
  "agent": "dev",
  "task_type": "implement-security-fix",
  "model": "arcee-ai/trinity-large-preview:free",
  "tools_required": ["file_read", "file_write", "shell_exec"],
  "aios_guide_path": ".aios-core/development/agents/dev.md",
  "context_files": [
    "modules/betting-platform/backend/services/QueryOptimizer.ts",
    "modules/betting-platform/backend/.env.example"
  ],
  "prompt": "CRITICAL FIX #1: Move hardcoded Redis URL to environment variables\n\nFILE: modules/betting-platform/backend/services/QueryOptimizer.ts:11\nISSUE: Hardcoded Redis URL 'redis://localhost:6379' exposes credentials\nRISK: Total cache/data compromise\n\nIMPLEMENTATION:\n1. Read QueryOptimizer.ts e identificar hardcoded URL (linha 11)\n2. Adicionar variáveis de ambiente:\n   - REDIS_HOST (default: localhost)\n   - REDIS_PORT (default: 6379)\n   - REDIS_PASSWORD (optional)\n   - REDIS_DB (default: 0)\n3. Update QueryOptimizer.ts constructor para ler de process.env\n4. Adicionar validação: throw error se vars críticas undefined\n5. Update .env.example com template das novas vars\n6. Implementar connection string builder:\n   redis://[password@]host:port/db\n7. Add error handling para conexão falha\n\nACCEPTANCE CRITERIA:\n- Zero URLs hardcoded no código\n- Todas vars em .env.example documentadas\n- Validação de env vars no startup\n- Connection builder correto\n- Error handling implementado\n\nOUTPUT: Code changes + .env.example update",
  "acceptance_criteria": [
    "Zero hardcoded Redis URLs no código",
    "Variáveis REDIS_* definidas em .env.example",
    "Validação de env vars com throw se undefined",
    "Connection string builder implementado",
    "Error handling para conexão Redis"
  ],
  "max_tool_iterations": 15,
  "self_review": true,
  "quality_threshold": 8
}
