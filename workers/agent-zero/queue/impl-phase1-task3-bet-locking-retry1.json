{
  "id": "impl-phase1-task3-bet-locking-retry1",
  "agent": "dev",
  "task_type": "implement-concurrency-fix",
  "model": "arcee-ai/trinity-large-preview:free",
  "tools_required": ["file_write"],
  "aios_guide_path": ".aios-core/development/agents/dev.md",
  "context_files": [],
  "prompt": "CREATE BET LOCK MANAGER\n\nCreate NEW file: modules/betting-platform/backend/services/BetLockManager.ts\n\nContent:\nexport class BetLockManager {\n  private locks = new Map<string, number>();\n  \n  async acquireLock(userId: string, eventId: string): Promise<boolean> {\n    const key = `${userId}:${eventId}`;\n    if (this.locks.has(key)) return false;\n    this.locks.set(key, Date.now());\n    setTimeout(() => this.locks.delete(key), 5000); // TTL 5s\n    return true;\n  }\n  \n  releaseLock(userId: string, eventId: string) {\n    this.locks.delete(`${userId}:${eventId}`);\n  }\n}\n\nJust create the file. Nothing else.",
  "acceptance_criteria": [
    "Arquivo BetLockManager.ts criado",
    "acquireLock/releaseLock implementados",
    "TTL 5s auto-release"
  ],
  "max_tool_iterations": 5,
  "self_review": false,
  "quality_threshold": 7
}
